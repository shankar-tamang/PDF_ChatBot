# ğŸ“„ PDF Chatbot with Retrieval-Augmented Generation (RAG)

A **ChatGPT-like AI assistant** that allows users to **upload PDFs**, extract their content using **Gemini AI**, convert the extracted text into **embeddings using ChromaDB**, and **query** the document to receive intelligent responses.

This project consists of:

- **Backend (Flask API)**: Handles file uploads, text extraction, embeddings, and querying.
- **Frontend (ReactJS UI)**: A sleek ChatGPT-inspired interface for user interaction.

---

## ğŸš€ Features

âœ… **Chat Session Management**  
âœ… **PDF Upload & Text Extraction** (via Gemini)  
âœ… **Embeddings with ChromaDB** (for efficient retrieval)  
âœ… **Query Handling with Retrieval-Augmented Generation (RAG)**  
âœ… **ChatGPT-like UI** (scrollable history, file upload integration)  
âœ… **Markdown Support** (for formatted responses)  
âœ… **Typing & Uploading Animations**  

---

## ğŸ“ Project Structure

```
pdf-chatbot/
â”‚â”€â”€ lumina/                  # Backend (Flask)
â”‚   â”œâ”€â”€ app.py               # Main backend entry point
â”‚   â”œâ”€â”€ database.py          # Database setup (SQLAlchemy)
â”‚   â”œâ”€â”€ routes/              # API Endpoints
â”‚   â”‚   â”œâ”€â”€ chat.py          # Chat message handling (RAG, retrieval, LLM response)
â”‚   â”‚   â”œâ”€â”€ pdf.py           # PDF file upload & embedding storage
â”‚   â”œâ”€â”€ utils/               # Helper utilities
â”‚   â”‚   â”œâ”€â”€ gemini_utils.py  # Google Gemini AI integration
â”‚   â”‚   â”œâ”€â”€ pdf_utils.py     # PDF text extraction & chunking
â”‚   â”‚   â”œâ”€â”€ embedding_utils.py # ChromaDB embedding storage/retrieval
â”‚   â”‚   â”œâ”€â”€ translation_utils.py # Query translation (English <-> Nepali)
â”‚   â”œâ”€â”€ models/              # Database Models
â”‚   â”‚   â”œâ”€â”€ conversation.py  # Chat sessions & messages
â”‚   â”‚   â”œâ”€â”€ pdf.py           # Uploaded PDFs
â”‚â”€â”€ pdf-chatbot-frontend/    # Frontend (React)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx  # Sidebar with chat list & actions
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatArea.jsx # Chat window (messages, file uploads)
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInput.jsx # Input box (text & file upload)
â”‚   â”‚   â”œâ”€â”€ services/api.js  # API calls to Flask backend
â”‚   â”‚   â”œâ”€â”€ App.js           # Main React App component
â”‚â”€â”€ requirements.txt         # Python dependencies
â”‚â”€â”€ README.md                # Documentation
```

---

## âš™ï¸ Setup & Installation

### ğŸ“Œ Prerequisites

- **Backend**
  - Python 3.8+
  - Flask, Flask-CORS
  - Google Gemini API Key
  - ChromaDB
  - Sentence Transformers (`paraphrase-multilingual-MiniLM-L12-v2`)

- **Frontend**
  - Node.js v14+
  - React.js

---

### ğŸ”¥ Backend Setup (Flask)

1ï¸âƒ£ **Clone the repository**  
```bash
git clone https://github.com/yourusername/pdf-chatbot.git
cd pdf-chatbot/lumina
```

2ï¸âƒ£ **Create a virtual environment & install dependencies**  
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3ï¸âƒ£ **Set up environment variables**  
Create a `.env` file:
```
GOOGLE_API_KEY=your_google_gemini_api_key
CHROMA_DB_PATH=chroma_db/
UPLOAD_FOLDER=uploads/
```

4ï¸âƒ£ **Run the backend**  
```bash
python app.py
```
The backend will start at `http://127.0.0.1:5000`.

---

### ğŸ¨ Frontend Setup (React)

1ï¸âƒ£ **Navigate to the frontend folder**  
```bash
cd ../pdf-chatbot-frontend
```

2ï¸âƒ£ **Install dependencies**  
```bash
npm install
```

3ï¸âƒ£ **Run the frontend**  
```bash
npm start
```
The frontend will be available at `http://localhost:3000`.

---

## ğŸ“¡ API Endpoints (Backend)

### ğŸ“Œ **Chat Endpoints**
| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/chat/new` | Creates a new chat session |
| `POST` | `/chat` | Sends a message and gets AI response |
| `GET`  | `/history?session_id=XYZ` | Retrieves chat history |
| `GET`  | `/conversations` | Gets all conversations |

### ğŸ“Œ **PDF Upload & Querying**
| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/pdf/upload` | Uploads a PDF file & extracts embeddings |
| `POST` | `/chat` | Queries the document with RAG |

---

## ğŸ›  Usage Instructions

1ï¸âƒ£ **Start a New Chat**  
   - Click **+ New Chat** (sidebar).  
   - Chats are auto-named based on **date** (e.g., "Tue Mar 14 2025, Chat #1").  

2ï¸âƒ£ **Upload a PDF**  
   - Click ğŸ“ **Attach File** in input box.  
   - File uploads show **â€œUploading... ğŸ¤”â€** status, followed by confirmation.  

3ï¸âƒ£ **Ask a Question**  
   - Type a message and press **Enter**.  
   - The chatbot retrieves relevant chunks and generates an AI response.  

4ï¸âƒ£ **Chat History & UI**  
   - Scroll to see past messages, **formatted with Markdown**.  
   - Uploaded files appear **above the first query** like in ChatGPT.  

---

## ğŸ¨ Frontend Enhancements

- **ğŸ“ File Uploads Appear in Chat Window** (not just in input box).  
- **âŒ› Upload Status is Lightweight** (animated subtle message).  
- **ğŸŒ€ Typing Animation Like ChatGPT** (`...` dots effect while bot thinks).  
- **ğŸ–¼ Markdown Support for AI Replies** (renders properly formatted text).  
- **ğŸ“œ Long Scrollable Query & Response Area** (for better readability).  

---

## ğŸ›  Troubleshooting

### âŒ Backend Issues
âœ… Check if Flask server is running (`http://127.0.0.1:5000`).  
âœ… Ensure **Google API Key** is correct in `.env`.  
âœ… Run `flask db upgrade` if facing database issues.  

### âŒ Frontend Issues
âœ… Run `npm install` again if dependencies are missing.  
âœ… Ensure **API Base URL** is correct in `api.js`.  
âœ… Check browser **Console** for CORS or network errors.  

---

## ğŸ¤ Contributing

ğŸš€ Contributions are welcome! Fork this repository and submit a PR.  

---

## ğŸ“œ License

ğŸ“ MIT License.  
Use freely, modify, and share.  

---

ğŸ’¡ **Built with Flask, React, and ChromaDB for smarter PDF interactions.** ğŸ‰

